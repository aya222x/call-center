# ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç - Call Center KPI System

## ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ!

–ë—ç–∫–µ–Ω–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω (175 —Ç–µ—Å—Ç–æ–≤ ‚úÖ)

---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
```bash
# –ë–∞–∑–∞ —É–∂–µ —Å–æ–∑–¥–∞–Ω–∞ —Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏
# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å:
bin/rails db:reset && bin/rails demo:setup
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π
bin/rails runner test_system.rb

# –ü–æ–ª–Ω—ã–π –∑–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ (175 specs)
bundle exec rspec
```

### 3. –†–∞–±–æ—Ç–∞ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å
```bash
# –û—Ç–∫—Ä—ã—Ç—å Rails –∫–æ–Ω—Å–æ–ª—å
bin/rails console

# –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥:
CallRecording.all                    # –í—Å–µ –∑–∞–ø–∏—Å–∏
Evaluation.order(overall_score: :desc)  # –õ—É—á—à–∏–µ –æ—Ü–µ–Ω–∫–∏
User.operator.count                  # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
Department.first.teams               # –ö–æ–º–∞–Ω–¥—ã –æ—Ç–¥–µ–ª–∞
```

---

## üë• –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

| Email | –ü–∞—Ä–æ–ª—å | –†–æ–ª—å |
|-------|--------|------|
| admin@example.com | password123 | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä |
| manager@example.com | password123 | –ú–µ–Ω–µ–¥–∂–µ—Ä |
| supervisor1@example.com | password123 | –°—É–ø–µ—Ä–≤–∞–π–∑–æ—Ä (Sales) |
| supervisor2@example.com | password123 | –°—É–ø–µ—Ä–≤–∞–π–∑–æ—Ä (Bank) |
| operator1@example.com | password123 | –û–ø–µ—Ä–∞—Ç–æ—Ä (Sales) |
| operator2@example.com | password123 | –û–ø–µ—Ä–∞—Ç–æ—Ä (Bank) |

---

## üìä –ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### ‚úÖ Backend (100% –≥–æ—Ç–æ–≤)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: 6 —Ç–∞–±–ª–∏—Ü —Å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–º–∏
- **–ú–æ–¥–µ–ª–∏**: 5 –Ω–æ–≤—ã—Ö + —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è User (88 —Ç–µ—Å—Ç–æ–≤ ‚úÖ)
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: Pundit policies –¥–ª—è 4 —Ä–æ–ª–µ–π (51 —Ç–µ—Å—Ç ‚úÖ)
- **OpenAI —Å–µ—Ä–≤–∏—Å—ã**: —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è + –æ—Ü–µ–Ω–∫–∞ (36 —Ç–µ—Å—Ç–æ–≤ ‚úÖ)
- **–î–µ–º–æ-–¥–∞–Ω–Ω—ã–µ**: 2 –æ—Ç–¥–µ–ª–∞, 2 –∫–æ–º–∞–Ω–¥—ã, 6 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, 2 –∑–≤–æ–Ω–∫–∞ —Å –æ—Ü–µ–Ω–∫–∞–º–∏

### üìà –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
- **–ó–∞–ø–∏—Å—å #1**: Maria Operator, –ø—Ä–æ–¥–∞–∂–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º - **90/100** (Excellent)
- **–ó–∞–ø–∏—Å—å #2**: Aibek Operator, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–∞ –∫—ã—Ä–≥—ã–∑—Å–∫–æ–º - **80/100** (Good)

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ OpenAI (—Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á)

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤–∞—à OpenAI API –∫–ª—é—á
echo "OPENAI_API_KEY=sk-..." > .env
```

### –¢–µ—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
```ruby
# –í rails console
recording = CallRecording.create!(
  user: User.operator.first,
  call_script: CallScript.first,
  status: :uploaded,
  language: :russian,
  call_date: Date.current
)

# –ü—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –∞—É–¥–∏–æ —Ñ–∞–π–ª
recording.audio_file.attach(
  io: File.open('/path/to/your/audio.mp3'),
  filename: 'call.mp3',
  content_type: 'audio/mpeg'
)

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é
result = Openai::TranscribeAudio.run(call_recording: recording)
puts result.result[:transcript] if result.valid?
```

### –¢–µ—Å—Ç –æ—Ü–µ–Ω–∫–∏
```ruby
# –í rails console
recording.update!(
  status: :analyzing,
  transcript: "–í–∞—à —Ç–µ–∫—Å—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä–∞ –∑–¥–µ—Å—å..."
)

result = Openai::EvaluateCall.run(call_recording: recording)
if result.valid?
  eval = result.result[:evaluation]
  puts "–û–±—â–∏–π –±–∞–ª–ª: #{eval.overall_score}/100"
  puts eval.recommendations
end
```

---

## üìÅ –ü–æ–ª–µ–∑–Ω—ã–µ —Ñ–∞–π–ª—ã

- **PRODUCT_SPEC.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
- **SETUP_GUIDE.md** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ
- **test_system.rb** - —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üéØ –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–ª—è UI

### 1. –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã (Rails)
- `DepartmentsController` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª–∞–º–∏
- `CallScriptsController` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞–º–∏
- `CallRecordingsController` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–ø–∏—Å–µ–π
- `EvaluationsController` - –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ü–µ–Ω–æ–∫
- `DashboardController` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### 2. React —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Inertia)
- Login page
- Dashboard (–≥–ª–∞–≤–Ω–∞—è —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π)
- Call Recordings (—Å–ø–∏—Å–æ–∫ + –∑–∞–≥—Ä—É–∑–∫–∞ + –¥–µ—Ç–∞–ª–∏)
- Call Scripts management (–¥–ª—è –∞–¥–º–∏–Ω–∞)
- Evaluations view (–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ü–µ–Ω–æ–∫)
- Reports (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á—ë—Ç–æ–≤)

### 3. E2E —Ç–µ—Å—Ç—ã (Playwright)
- User login flow
- Upload call recording
- View evaluation results
- Generate reports

---

## üî• –ë—ã—Å—Ç—Ä—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
bin/rails runner test_system.rb

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã
bundle exec rspec --format documentation

# –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –¥–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤
bin/rails console

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –¥–µ–º–æ-–¥–∞–Ω–Ω—ã–µ
bin/rails db:reset && bin/rails demo:setup

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
bin/rails runner "puts 'Recordings: ' + CallRecording.count.to_s; puts 'Avg Score: ' + Evaluation.average(:overall_score).to_f.round(2).to_s"
```

---

## üí° –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞

**–¢–µ–∫—É—â–∏–π —É—Ä–æ–≤–µ–Ω—å**: Level 1 (Quick Prototype)
**Backend**: ‚úÖ Production Ready (Level 3 —Å –ø–æ–ª–Ω—ã–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º)
**Frontend**: ‚ùå –ï—â—ë –Ω–µ —Å–æ–∑–¥–∞–Ω

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è**: –ê–ø–≥—Ä–µ–π–¥ –¥–æ Level 2 –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏ UI

---

## üìû –°—Ç–æ–∏–º–æ—Å—Ç—å OpenAI

- **1 –∑–≤–æ–Ω–æ–∫** (—Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è + –æ—Ü–µ–Ω–∫–∞): ~$0.05-0.10
- **100 –∑–≤–æ–Ω–∫–æ–≤ –≤ –¥–µ–Ω—å**: ~$5-10/–¥–µ–Ω—å
- **1000 –∑–≤–æ–Ω–∫–æ–≤ –≤ –º–µ—Å—è—Ü**: ~$50-100/–º–µ—Å—è—Ü

---

## ‚ú® –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 5 KPI –º–µ—Ç—Ä–∏–∫
1. üìã –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—É (0-100)
2. üòä –í–µ–∂–ª–∏–≤–æ—Å—Ç—å –∏ —Ç–æ–Ω (0-100)
3. ‚ö° –°–∫–æ—Ä–æ—Å—Ç—å —Ä–µ—à–µ–Ω–∏—è (0-100)
4. üìö –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ (0-100)
5. ‚úÖ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å –∑–≤–æ–Ω–∫–∞ (0-100)

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤
- üá∞üá¨ –ö—ã—Ä–≥—ã–∑—Å–∫–∏–π (kyrgyz)
- üá∑üá∫ –†—É—Å—Å–∫–∏–π (russian)
- üá¨üáß –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (english)

### –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üëë **–ê–¥–º–∏–Ω**: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞–º–∏
- üëî **–ú–µ–Ω–µ–¥–∂–µ—Ä**: –ø—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö, –æ—Ç—á—ë—Ç—ã
- üëÄ **–°—É–ø–µ—Ä–≤–∞–π–∑–æ—Ä**: –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–≤–æ–µ–π –∫–æ–º–∞–Ω–¥—ã
- üéß **–û–ø–µ—Ä–∞—Ç–æ—Ä**: —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏ –∏ –æ—Ü–µ–Ω–∫–∏

---

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ

–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è UI –≤—ã–ø–æ–ª–Ω–∏—Ç–µ: `–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É` –∏–ª–∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –≤ PRODUCT_SPEC.md
